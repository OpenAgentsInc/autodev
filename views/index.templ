package views

templ ThreadList() {
	<div class="h-full overflow-y-auto border-r border-gray-800">
		<h2 class="text-xl font-bold mb-4 p-4">Threads</h2>
		// TODO: Add thread list items here
	</div>
}

templ MessageList() {
	<div class="h-full overflow-y-auto border-r border-gray-800 p-4">
		<h2 class="text-xl font-bold mb-4">Messages</h2>
		<form hx-post="/run-plugin" hx-target="#result" class="space-y-4">
			<select name="operation" class="w-full p-2 bg-gray-800 text-white border border-gray-700 rounded">
				<option value="index">Index</option>
				<option value="query">Query</option>
				<option value="search">Search</option>
			</select>
			<input type="text" name="repository" placeholder="Repository (e.g., username/repo)" class="w-full p-2 bg-gray-800 text-white border border-gray-700 rounded"/>
			<input type="text" name="branch" placeholder="Branch (default: main)" class="w-full p-2 bg-gray-800 text-white border border-gray-700 rounded"/>
			<input type="text" name="query" placeholder="Query or search term" class="w-full p-2 bg-gray-800 text-white border border-gray-700 rounded"/>
			<button type="submit" class="w-full p-2 bg-blue-600 hover:bg-blue-700 text-white rounded">Run Plugin</button>
		</form>
		<div id="result" class="mt-4 p-4 bg-gray-800 rounded"></div>
	</div>
}

templ AgentWorkspace() {
	<div class="h-full p-4">
		<h2 class="text-xl font-bold mb-4">Agent Workspace</h2>
		<div class="bg-gray-900 text-white p-4 h-[200px] font-mono text-sm rounded">
			<pre class="whitespace-pre-wrap">
				_____ _    _ _______ ____  _____  ________      __
				/ ____| |  | |__   __/ __ \|  __ \|  ____\ \    / /
				| |    | |  | |  | | | |  | | |  | | |__   \ \  / / 
				| |    | |  | |  | | | |  | | |  | |  __|   \ \/ /  
				| |____| |__| |  | | | |__| | |__| | |____   \  /   
				\_____|\____/   |_|  \____/|_____/|______|   \/    
			</pre>
		</div>
	</div>
}

templ Index(cssVersion string) {
	<html>
		<head>
			<title>AutoDev</title>
			<script src="https://unpkg.com/htmx.org@1.9.2"></script>
			<link href={ "/static/css/output.css?" + cssVersion } rel="stylesheet"/>
		</head>
		<body class="bg-black text-white font-mono">
			<div class="flex h-screen">
				<div class="w-1/5">
					@ThreadList()
				</div>
				<div class="w-2/5">
					@MessageList()
				</div>
				<div class="w-2/5">
					@AgentWorkspace()
				</div>
			</div>
			<script>
                document.querySelector('select[name="operation"]').addEventListener('change', function() {
                    var queryInput = document.querySelector('input[name="query"]');
                    if (this.value === 'index') {
                        queryInput.style.display = 'none';
                    } else {
                        queryInput.style.display = 'block';
                    }
                });
            </script>
		</body>
	</html>
}
